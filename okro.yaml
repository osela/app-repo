name: okro
modules:
- name: server
  artifact: my-artifact
  ports:
  - name: api
    type: http
  - name: delme
    type: grpc
  serves:
  - api: okro
    version: v1
    port: api
  - api: delme
    version: v1
    port: delme
  wants:
    apis:
    - app: dummy-app1
      api: api
      version: v1
    - app: dummy-app2
      api: api
      version: v3
    - tenant: tenant-1
      app: dummy-app3
      api: api
      version: v1beta1
    topics:
    - pubsub: ps1
      topic: bla
    - pubsub: ps2
      topic: bla2
    - tenant: othertenant
      pubsub: ps1000
      topic: bla12030
- name: delme
  artifact: my-artifact
  ports:
  - name: delme
    type: grpc
  serves:
  - api: audit
    version: v1
    port: delme
  wants:
    topics:
    - pubsub: ps1
      topic: bla